!function(){function a(){return f.currentTime}function b(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a()+a(!0)+a(!0)+a()}function c(a){this.nodes=a||[]}function d(){return this.inputs=new c,this.outputs=new c,this}var e={},f=new AudioContext;e.time={},e.time.now=function(){return a()},e.time.in=function(b){return a()+b},e.time.seconds=function(a){return a},e.time.ms=function(a){return.001*a},e.time.samp=function(a){return a/f.sampleRate},e.chance=function(a){var b=Math.random();return a>b},e.random=function(a,b){switch(arguments.length){case 0:return Math.random();case 1:return Math.random()*a;case 2:return Math.random()*(b-a)+a}},c.prototype={count:function(){return this.nodes.length},each:function(a){for(var b=0;b<this.nodes.length;b++)a.call(this,this.nodes[b],b,this.nodes)},contains:function(a){for(var b=0;b<this.nodes.length;b++)if(this.nodes[b]===a)return!0;return!1},add:function(a){-1===this.nodes.indexOf(a)&&this.nodes.push(a)},remove:function(a){var b=this.nodes.indexOf(a);-1!==b&&this.nodes.splice(b,1)},removeAll:function(){this.nodes=[]}};var g={gain:f.createGain,delay:f.createDelay,panner:f.createPanner,convolver:f.createConvolver,analyser:f.createAnalyser,channelSplitter:f.createChannelSplitter,channelMerger:f.createChannelMerger,dynamicsCompressor:f.createDynamicsCompressor,biquadFilter:f.createBiquadFilter,waveShaper:f.createWaveShaper,oscillator:f.createOscillator,periodicWave:f.createPeriodicWave,bufferSource:f.createBufferSource,audioBufferSource:f.createBufferSource};d.prototype={connect:function(a){return this.node().numberOfOutputs>0&&a.node().numberOfInputs>0&&(this.node().connect(a.node()),this.outputs.add(a),a.inputs.add(this)),this},disconnect:function(a){this.node().disconnect();var b=this;return a?(this.outputs.remove(a),a.inputs.remove(this),this.outputs.each(function(a){this.connect(a)})):(this.outputs.each(function(a){a.inputs.remove(b)}),this.outputs.removeAll()),this},prop:function(a,b){if(arguments.length<2){if("object"==typeof a){for(var c in a)this.node()[c]=a[c];return this}return this.node()[a]}return this.node()[a]=b,this},param:function(a,b){return arguments.length<2?this.node()[a]:("function"!=typeof b?this.node()[a].value=b:b.call(this.node()[a]),this)},start:function(a){this.node().start.call(this.node(),a)},stop:function(a){this.node().stop.call(this.node(),a)},node:function(){return this.node()},toString:function(){return"[object BlipNode]"},valueOf:function(){return this.id()}},e.node=function(a){function c(a){return g[a].apply(f,e)}var e=Array.prototype.slice.call(arguments,1),h=c(a),i=b(),j=new d;return j.node=function(){return h},j.id=function(){return i},j};var h=function(a){var c=new d,e=b();return c.node=function(){return a},c.id=function(){return e},c};e.destination=h(f.destination),e.listener=h(f.listener),e.chain=function(a){function b(){for(var b=0;b<a.length-1;b++)a[b].connect(a[b+1])}a=a||[],b();var c={};return c.node=function(d){return a.push(d),b(),c},c.start=function(){var b=a.slice(0,1);return b.length?b[0]:null},c.end=function(){var b=a.slice(-1);return b.length?b[0]:null},c.from=function(a){return a.connect(c.start()),c},c.to=function(a){return c.end().connect(a),c},c.wire=function(){return b(),c},c},e.loop=function(){function a(){}function b(){var a=60/e;l+=a,++k>=j.length&&(k=0,n+=1)}function c(b,c){m.call(a,c,j[b],b)}function d(){for(;l<f.currentTime+i;)if(c(k,l),b(),o&&n>=o)return void a.reset();g=window.setTimeout(d,h)}var e,g,h=25,i=.1,j=[],k=0,l=0,m=function(){},n=0,o=0;return a.tempo=function(b){return arguments.length?(e=b,a):e},a.data=function(b){return arguments.length?(j=b,a):j},a.lookahead=function(b){return arguments.length?(h=b,a):h},a.scheduleAheadTime=function(b){return arguments.length?(i=b,a):i},a.limit=function(b){return arguments.length?(o=b,a):o},a.tick=function(b){return arguments.length?(m=b,a):m},a.start=function(b){return l=b||f.currentTime,d(),a},a.stop=function(){return window.clearTimeout(g),a},a.reset=function(){return k=0,n=0,a},a};var i={};e.sampleLoader=function(){function a(){function a(){if(h<g.length){var a=g[h];h++,e(a,b[a])}else d()}function e(b,d){function e(a){var b=a.target,c=b.response;f.decodeAudioData(c,g)}function g(d){i[b]=d,c(b),a()}var h=new XMLHttpRequest;h.open("GET",d,!0),h.responseType="arraybuffer",h.addEventListener("load",e,!1),h.send()}var g=Object.keys(b),h=0;a()}var b={},c=function(){},d=function(){};return a.samples=function(c){return arguments.length?(b=c,a):b},a.each=function(b){return arguments.length?(c=b,a):c},a.done=function(b){return arguments.length?(d=b,a):d},a.load=function(){return a()},a},e.clip=function(){function a(){}var b,c=1,g=1,j=null,k=e.node("gain").connect(e.destination);return a.sample=function(c){return arguments.length?(b=i[c],a):b},a.defaultRate=function(b){return arguments.length?(defaultRate=b,a):defaultRate},a.rate=function(b){return arguments.length?(c=b,a):c},a.gain=function(b){return arguments.length?(g=b,a):g},a.chain=function(b){return arguments.length?(j=b,k.disconnect(e.destination),j.from(k).to(e.destination),a):j},a.play=function(a,c){a=a||0;var e=f.createBufferSource();e.buffer=b,c&&("undefined"!=typeof c.gain&&("function"==typeof c.gain?k.param("gain",c.gain):k.param("gain",function(){this.setValueAtTime(c.gain,a)})),"undefined"!=typeof c.rate&&("function"==typeof c.rate?d.prototype.param.call(h(e),"playbackRate",c.rate):e.playbackRate.setValueAtTime(c.rate,a))),e.connect(k.node()),e.start(a)},a},e.getContext=function(){return f},e.getLoadedSamples=function(){return i},e.sample=function(a){return i[a]};window.blip=e}();